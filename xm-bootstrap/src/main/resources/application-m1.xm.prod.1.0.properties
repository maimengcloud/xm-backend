#内置服务器的端口
spring.application.name=xm
server.port=7067
# 默认情况下为 spring.application.name + server.port, 如果在多个服务器上同一个服务, 因为应用名和端口都一致, 会导致service id 会重复, 所以一般情况都需要引入一个随机数避免重复 .
# spring.cloud.consul.discovery.instance-id=${spring.application.name}-${server.port}-${random.value}

#server.context-path=/${spring.application.name}
#session失效时间 秒
server.session.timeout=43200
spring.session.store-type=redis
spring.cloud.inetutils.preferredNetworks[0]=^10\.
spring.cloud.inetutils.preferredNetworks[1]=^172\.
#eureka.client.serviceUrl.defaultZone=http://172.16.16.16:6110/eureka/
#eureka.instance.hostname= ${spring.cloud.client.ipAddress}
#eureka.instance.instance-id=${spring.cloud.client.ipAddress}:${server.port}
#eureka.instance.prefer-ip-address=true

spring.cloud.consul.host=172.16.16.16
spring.cloud.consul.port=8500


#服务跟踪
spring.zipkin.enabled=true
spring.zipkin.base-url=http://172.16.16.16:6119/
spring.sleuth.sampler.percentage=1.0

spring.jackson.mapper.default-view-inclusion=false
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.mvc.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=GMT+8
spring.jackson.serialization.indent_output=true
spring.jackson.serialization.fail_on_empty_beans=false
spring.jackson.deserialization.fail_on_unknown_properties=false
spring.jackson.parser.allow_unquoted_control_chars=true
spring.jackson.parser.allow_single_quotes=true

#限制文件上传大小
spring.http.multipart.maxFileSize=10Mb
spring.http.multipart.maxRequestSize=10Mb


#配置图片文件上传下载的相关参数，如果此次配置将覆盖数据库系统参数中的 arcImageUploadRootPath 及 arcImageDownloadBaseUri两个参数
#mdp.arc.image-upload-root-path=/home/keyun/mall/arc/image
#mdp.arc.image-download-base-uri=arc/
#mdp.arc.file-upload-root-path=/home/keyun/mall/arc/files

#mdp.auth.ips=ip1,ip2,ip3,授权ip地址列表，如果非授权ip应用只允许使用24小时
mdp.auth.ips=172.18.153.152

mdp.api-gate=http://gate
mdp.platform-branch-id=platform-branch-001

# 权限自动注册接口，云环境下 http://微服务名称/sys/qx/autoRegist，本地调试 http://ip:port/sys/qx/autoRegist
mdp.auth.qx-regist-url=http://sys/sys/qx/autoRegist
# 审计日志收集，云环境下 http://微服务名称/audit/base/operLog/add，本地调试 http://ip:port/audit/base/operLog/add
mdp.audit.audit-log-url=http://audit/audit/base/operLog/add
# 元数据/系统参数等接口 云环境下 http://微服务名称/sys/meta/itemOption/list/byItemCode，本地调试 http://ip:port/meta/itemOption/list/byItemCode
mdp.meta.item-options-query-uri= http://sys/meta/itemOption/list/byItemCode
# 元数据/系统参数等接口 云环境下 http://微服务名称/sys/meta/item/list，本地调试 http://ip:port/meta/item/list
mdp.meta.items-query-uri= http://sys/meta/item/list
# 第三方授权登陆参数配置数据访问接口 云环境下 http://微服务名称/app/appTpAuth/list，本地调试 http://ip:port/app/appTpAuth/list
mdp.tpa.app-tp-auth-query-uri= http://sys/app/appTpAuth/list
# 第三方授权支付参数配置数据访问接口 云环境下 http://微服务名称/app/appTpPay/list，本地调试 http://ip:port/app/appTpPay/list
mdp.tpa.app-tp-pay-query-uri= http://sys/app/appTpPay/list
# 第三方授权登陆登陆用户查询接口 云环境下 http://微服务名称/sys/userTpa/list，本地调试 http://ip:port/sys/userTpa/list
mdp.tpa.user-tpa-query-uri= http://sys/sys/userTpa/list

# mdp平台授权验证服务器访问地址 cloud环境下换成 http://oauth2server，本地调试如果不起验证服务器，可改为 https://www.qingqinkj.com/api/m1/oauth2server
# oauth2client服务比较特殊，oauth2client工程访问oauth2server要通过非cloud方式访问。即http://ip:port/的方式，或者https://www.qingqinkj.com/api/m1/oauth2server
mdp.oauth2.server.uri= http://oauth2server

# 下面配置 password 模式
spring.security.oauth2.client.registration.password-client.provider=def-oauth-server
spring.security.oauth2.client.registration.password-client.client-id=${spring.application.name}
spring.security.oauth2.client.registration.password-client.client-secret= ${spring.application.name}-8888
spring.security.oauth2.client.registration.password-client.authorization-grant-type= password
spring.security.oauth2.client.registration.password-client.scope= all

# 下面配置 client_credentials 模式
spring.security.oauth2.client.registration.def-client.provider=def-oauth-server
spring.security.oauth2.client.registration.def-client.client-id=${spring.application.name}
spring.security.oauth2.client.registration.def-client.client-secret= ${spring.application.name}-8888
spring.security.oauth2.client.registration.def-client.authorization-grant-type= client_credentials
spring.security.oauth2.client.registration.def-client.scope= all

# 下面配置authorization_code模式
spring.security.oauth2.client.registration.code-client.provider=def-oauth-server
spring.security.oauth2.client.registration.code-client.client-id=${spring.application.name}
spring.security.oauth2.client.registration.code-client.client-secret= ${spring.application.name}-8888
spring.security.oauth2.client.registration.code-client.authorization-grant-type= authorization_code
# 授权码模式下需要配置重定向地址
spring.security.oauth2.client.registration.code-client.redirect-uri= ${messages.base-uri}/authorized
spring.security.oauth2.client.registration.code-client.scope= all

# 授权码方式获取code
spring.security.oauth2.client.provider.def-oauth-server.authorization-uri= ${mdp.oauth2.server.uri}/oauth2/authorize
# 获取token接口
spring.security.oauth2.client.provider.def-oauth-server.token-uri= ${mdp.oauth2.server.uri}/oauth2/token

# 资源服务器
spring.security.oauth2.resourceserver.jwt.jwk-set-uri= ${mdp.oauth2.server.uri}/oauth2/jwks

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.jdbc-url=jdbc:mysql://10.0.0.5:3306/xm?useUnicode=true&characterEncoding=utf-8&useSSL=false&allowMultiQueries=true&serverTimezone=CTT
spring.datasource.username=root
spring.datasource.password=1qaz@WSX
spring.datasource.validation-query=SELECT 1
spring.datasource.test-on-borrow=true
spring.datasource.validation-interval=30000


##begin 商户相关配置###顶级商户###########################################################
mdp.topMech.mechId=m1000
mdp.topMech.mechName=广州擎勤网络科技有限公司
mdp.topMech.userid=1000
mdp.topMech.userName=广州擎勤网络科技有限公司
mdp.topMech.accountId=m1000
##end 商户相关配置################################################################

#腾讯云短信验证码@Value("${mdp.sms.appid}")
mdp.sms.appid=1400038813
mdp.sms.app-secret=4b0659a2ee8ba4e54a570515fda94aef

# REDIS (RedisProperties)
# Redis数据库索引（默认为0）
spring.redis.database=0
# Redis服务器地址
spring.redis.host=172.16.16.16
# Redis服务器连接端口
spring.redis.port=6379
# Redis服务器连接密码（默认为空）
spring.redis.password=QqKj*123
# 连接池最大连接数（使用负值表示没有限制）
spring.redis.pool.max-active=8
# 连接池最大阻塞等待时间（使用负值表示没有限制）
spring.redis.pool.max-wait=-1
# 连接池中的最大空闲连接
spring.redis.pool.max-idle=8
# 连接池中的最小空闲连接
spring.redis.pool.min-idle=2
# 连接超时时间（毫秒）
spring.redis.timeout=100000